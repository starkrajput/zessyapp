import{a as m}from"./chunk-2VXTTU3C.js";import{Ab as d,E as c,H as u,n as g,o as p,v as t,zb as n}from"./chunk-PBQ7JJRU.js";var f=class a{constructor(e){this.http=e}apiUrl=m.apiUrl+"/api"||"https://your-api-domain.com/api";uploadAndProcessFile(e){let r=new FormData;return r.append("file",e),this.http.post(`${this.apiUrl}/fileprocessing/upload`,r).pipe(t(this.handleError))}extractText(e){let r=new FormData;return r.append("file",e),this.http.post(`${this.apiUrl}/fileprocessing/extract-text`,r).pipe(t(this.handleError))}convertFile(e,r,o){let s=new FormData;s.append("file",e);let l=`${this.apiUrl}/fileprocessing/convert?targetExtension=${r}`;return o&&(l+=`&options=${JSON.stringify(o)}`),this.http.post(l,s,{reportProgress:!0,observe:"events",responseType:"blob"}).pipe(p(i=>i.type===n.UploadProgress&&i.total?{status:"uploading",progress:Math.round(100*i.loaded/i.total),message:"Uploading file..."}:i.type===n.Response?{status:"complete",progress:100,message:"Conversion complete!",blob:i.body}:{status:"processing",progress:50,message:"Converting file..."}),t(this.handleError))}convertToPdf(e){let r=new FormData;return r.append("file",e),this.http.post(`${this.apiUrl}/fileprocessing/convert-to-pdf`,r,{reportProgress:!0,observe:"events",responseType:"blob"}).pipe(p(o=>o.type===n.UploadProgress&&o.total?{status:"uploading",progress:Math.round(100*o.loaded/o.total),message:"Uploading file..."}:o.type===n.Response?{status:"complete",progress:100,message:"PDF generated successfully!",blob:o.body}:{status:"processing",progress:50,message:"Converting to PDF..."}),t(this.handleError))}convertFromPdf(e,r){let o=new FormData;return o.append("file",e),this.http.post(`${this.apiUrl}/fileprocessing/convert-from-pdf?targetExtension=${r}`,o,{reportProgress:!0,observe:"events",responseType:"blob"}).pipe(p(s=>s.type===n.UploadProgress&&s.total?{status:"uploading",progress:Math.round(100*s.loaded/s.total),message:"Uploading PDF..."}:s.type===n.Response?{status:"complete",progress:100,message:"Conversion complete!",blob:s.body}:{status:"processing",progress:50,message:"Converting PDF..."}),t(this.handleError))}isConversionSupported(e,r){return this.http.get(`${this.apiUrl}/fileprocessing/is-conversion-supported?sourceExtension=${e}&targetExtension=${r}`).pipe(t(this.handleError))}getSupportedConversions(e){return this.http.get(`${this.apiUrl}/fileprocessing/supported-conversions?sourceExtension=${e}`).pipe(t(this.handleError))}checkHealth(){return this.http.get(`${this.apiUrl}/FileProcessing/health`).pipe(t(()=>g(()=>({status:"unhealthy"}))))}downloadBlob(e,r){let o=window.URL.createObjectURL(e),s=document.createElement("a");s.href=o,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(o)}handleError(e){let r="An error occurred";return e.error instanceof ErrorEvent?r=`Error: ${e.error.message}`:(r=`Error Code: ${e.status}
Message: ${e.message}`,e.error&&(typeof e.error=="string"?r=e.error:e.error.message&&(r=e.error.message))),g(()=>new Error(r))}static \u0275fac=function(r){return new(r||a)(u(d))};static \u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"})};export{f as a};
